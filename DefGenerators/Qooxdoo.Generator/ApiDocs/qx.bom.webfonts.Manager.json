{"attributes": {"name": "Manager", "packageName": "qx.bom.webfonts", "superClass": "qx.core.Object", "isSingleton": true, "fullName": "qx.bom.webfonts.Manager", "type": "class"}, "type": "class", "children": [{"attributes": {"text": "<p>Manages font-face definitions, making sure that each rule is only applied\nonce.</p>"}, "type": "desc"}, {"attributes": {}, "type": "constructor", "children": [{"attributes": {"docFrom": "qx.core.Object", "line": 34, "isCtor": true, "overriddenFrom": "qx.core.Object", "name": "ctor"}, "type": "method"}]}, {"attributes": {}, "type": "constants", "children": [{"attributes": {"type": "Array", "name": "FONT_FORMATS", "value": "[\"eot\",\"woff\",\"ttf\",\"svg\"]"}, "type": "constant", "children": [{"attributes": {"text": "<p>List of known font definition formats (i.e. file extensions). Used to\nidentify the type of each font file configured for a web font.</p>"}, "type": "desc"}]}, {"attributes": {"type": "Number", "name": "VALIDATION_TIMEOUT", "value": "5000"}, "type": "constant", "children": [{"attributes": {"text": "<p>Timeout (in ms) to wait before deciding that a web font was not loaded.</p>"}, "type": "desc"}]}]}, {"attributes": {}, "type": "methods", "children": [{"attributes": {"access": "private", "line": 398, "name": "__addRule"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "rule"}, "type": "param", "children": [{"attributes": {"text": "<p>The body of the <span class=\"caps\">CSS</span> rule</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Adds a font-face rule to the document</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 453, "name": "__fixCssText"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "cssText"}, "type": "param", "children": [{"attributes": {"text": "<p><span class=\"caps\">CSS</span> text</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>IE 6 and 7 omit the trailing quote after the format name when\nquerying cssText. This needs to be fixed before cssText is replaced\nor all rules will be invalid and no web fonts will work any more.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Fixed <span class=\"caps\">CSS</span> text</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 282, "name": "__flushQueue"}, "type": "method", "children": [{"attributes": {"text": "<p>Processes the next item in the queue</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 346, "name": "__getRule"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "familyName"}, "type": "param", "children": [{"attributes": {"text": "<p>Font-family name</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "sourcesMap"}, "type": "param", "children": [{"attributes": {"text": "<p>Map of font formats and sources</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Map"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Assembles the body of a font-face rule for a single webFont.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The computed <span class=\"caps\">CSS</span> rule</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 376, "name": "__getSourceForFormat"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "format"}, "type": "param", "children": [{"attributes": {"text": "<p>The font format, one of eot, woff, ttf, svg</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "url"}, "type": "param", "children": [{"attributes": {"text": "<p>The font file&#8217;s <span class=\"caps\">URL</span></p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Returns the full src value for a given font <span class=\"caps\">URL</span> depending on the type</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The src directive</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 317, "name": "__getSourcesMap"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "sources"}, "type": "param", "children": [{"attributes": {"text": "<p>Array of source URLs</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String", "dimensions": 1}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Uses a naive regExp match to determine the format of each defined source\nfile for a webFont. Returns a map with the format names as keys and the\ncorresponding source URLs as values.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>Map of formats and URLs</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Map"}, "type": "entry"}]}]}]}, {"attributes": {"access": "private", "line": 298, "name": "__onFontChangeStatus"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "ev"}, "type": "param", "children": [{"attributes": {"text": "<p>qx.bom.webfonts.Validator#changeStatus</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.event.type.Data"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Removes the font-face declaration if a font could not be validated</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 420, "name": "__removeRule"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "familyName"}, "type": "param", "children": [{"attributes": {"text": "<p>The font-family name</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Removes the font-face declaration for the given font-family from the\nstylesheet</p>"}, "type": "desc"}]}, {"attributes": {"access": "private", "line": 238, "name": "__require"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "familyName"}, "type": "param", "children": [{"attributes": {"text": "<p>Name of the web font</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "sources"}, "type": "param", "children": [{"attributes": {"text": "<p>List of source URLs. For maximum compatibility, this should include <span class=\"caps\">EOT</span>, <span class=\"caps\">WOFF</span> and <span class=\"caps\">TTF</span> versions of the font.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String", "dimensions": 1}, "type": "entry"}]}]}, {"attributes": {"name": "callback"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional event listener callback that will be executed once the validator has determined whether the webFont was applied correctly.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Function"}, "type": "entry"}]}]}, {"attributes": {"name": "context"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional context for the callback function</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Does the actual work of adding stylesheet rules and triggering font\nvalidation</p>"}, "type": "desc"}]}, {"attributes": {"line": 169, "name": "getPreferredFormats"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns the preferred font format(s) for the currently used browser. Some\nbrowsers support multiple formats, e.g. <span class=\"caps\">WOFF</span> and <span class=\"caps\">TTF</span> or <span class=\"caps\">WOFF</span> and <span class=\"caps\">EOT</span>. In\nthose cases, <span class=\"caps\">WOFF</span> is considered the preferred format.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>List of supported font formats ordered by preference or empty Array if none could be determined</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String", "dimensions": 1}, "type": "entry"}]}]}]}, {"attributes": {"line": 142, "name": "remove"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "familyName"}, "type": "param", "children": [{"attributes": {"text": "<p>font-family name</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Removes a font&#8217;s font-face definition from the style sheet. This means\nthe font will no longer be available and any elements using it will\nfall back to the their regular font-families.</p>"}, "type": "desc"}]}, {"attributes": {"line": 209, "name": "removeStyleSheet"}, "type": "method", "children": [{"attributes": {"text": "<p>Removes the styleSheet element used for all web font definitions from the\ndocument. This means all web fonts declared by the manager will no longer\nbe available and elements using them will fall back to their regular\nfont-families</p>"}, "type": "desc"}]}, {"attributes": {"line": 103, "name": "require"}, "type": "method", "children": [{"attributes": {}, "type": "params", "children": [{"attributes": {"name": "familyName"}, "type": "param", "children": [{"attributes": {"text": "<p>Name of the web font</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String"}, "type": "entry"}]}]}, {"attributes": {"name": "sourcesList"}, "type": "param", "children": [{"attributes": {"text": "<p>List of source URLs. For maximum compatibility, this should include <span class=\"caps\">EOT</span>, <span class=\"caps\">WOFF</span> and <span class=\"caps\">TTF</span> versions of the font.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "String", "dimensions": 1}, "type": "entry"}]}]}, {"attributes": {"name": "callback"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional event listener callback that will be executed once the validator has determined whether the webFont was applied correctly. See {@link qx.bom.webfonts.Validator#changeStatus}</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Function"}, "type": "entry"}]}]}, {"attributes": {"name": "context"}, "type": "param", "children": [{"attributes": {"text": "<p>Optional context for the callback function</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "Object"}, "type": "entry"}]}]}]}, {"attributes": {"text": "<p>Adds the necessary font-face rule for a web font to the document. Also\ncreates a web font Validator ({@link qx.bom.webfonts.Validator}) that\nchecks if the webFont was applied correctly.</p>"}, "type": "desc"}]}]}, {"attributes": {}, "type": "methods-static", "children": [{"attributes": {"line": 11, "isStatic": true, "name": "getInstance"}, "type": "method", "children": [{"attributes": {"text": "<p>Returns a singleton instance of this class. On the first call the class\nis instantiated by calling the constructor with no arguments. All following\ncalls will return this instance.</p>\n\n<p>This method has been added by setting the &#8220;type&#8221; key in the class definition\n({@link qx.Class#define}) to &#8220;singleton&#8221;.</p>"}, "type": "desc"}, {"attributes": {}, "type": "return", "children": [{"attributes": {"text": "<p>The singleton instance of this class.</p>"}, "type": "desc"}, {"attributes": {}, "type": "types", "children": [{"attributes": {"type": "qx.bom.webfonts.Manager"}, "type": "entry"}]}]}]}]}]}